<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Grade Computation</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

<style>
    :root{
        --gold:#d4a63f;
        --gold-dark:#d1a326;
        --black:#000;
        --cream:#fff8e1;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    body{
        font-family: 'Montserrat', sans-serif;
        background: #f4f4f4;
        padding: 36px;
        min-height:100vh;
        display:flex;
        justify-content:center;
        align-items:flex-start;
    }

    .container{
        width:95%;
        max-width:1150px;
        background: var(--gold);
        border:5px solid var(--black);
        border-radius:18px;
        padding:22px;
        box-shadow: 0 8px 22px rgba(0,0,0,0.45);
    }

    /* BACK BUTTON (same as your To-Do page) */
    a.back-btn {
        display:inline-block; 
        margin-bottom:25px; 
        text-decoration:none; 
        color:#000; 
        font-weight:700; 
        padding: 10px 18px; 
        border:3px solid #000; 
        border-radius:10px; 
        background-color:#fff8e1;
        transition: 0.2s ease;
    }

    a.back-btn:hover {
        background: #ffe9a6;
        transform: translateY(-2px);
        box-shadow: 0 4px 0 #000;
    }

    .title{
        font-family: "Playfair Display", serif;
        font-size:40px;
        font-weight:700;
        text-align:center;
        margin-bottom:18px;
        color: #000;
        letter-spacing:1px;
    }

    .white-box{
        background: #fff;
        padding:18px;
        border-radius:12px;
        border:3px solid #000;
        box-shadow: 0 6px 18px rgba(0,0,0,0.18);
    }

    .form-row{
        display:flex;
        gap:12px;
        margin-bottom:12px;
        flex-wrap:wrap;
    }

    .form-row .col{
        flex:1;
        min-width:120px;
    }

    label{
        display:block;
        font-weight:700;
        color:#111;
        margin-bottom:6px;
        font-size:14px;
    }

    input[type="text"], input[type="number"]{
        width:100%;
        padding:8px 10px;
        border:2px solid #000;
        border-radius:6px;
        font-size:14px;
    }

    .controls{
        display:flex;
        gap:10px;
        margin-top:6px;
    }

    .btn{
        background:var(--black);
        color:#fff;
        padding:10px 18px;
        border:none;
        border-radius:8px;
        cursor:pointer;
        font-weight:700;
    }

    .btn.secondary{
        background:#ccc;
        color:#000;
    }

    table{
        width:100%;
        border-collapse:collapse;
        margin-top:14px;
        font-size:14px;
        border:2px solid #000;
    }

    th, td{
        border:1px solid #000;
        padding:10px;
        text-align:center;
    }

    th{
        background:var(--gold);
        font-weight:800;
    }

    .actions button{
        margin-right:6px;
        padding:6px 10px;
        border-radius:6px;
        border:none;
        font-weight:700;
        cursor:pointer;
    }

    .edit-btn{ background:#4caf50;color:#fff; }
    .delete-btn{ background:#e53935;color:#fff; }

    .summary{
        margin-top:12px;
        display:flex;
        justify-content:flex-end;
        gap:18px;
        align-items:center;
        flex-wrap:wrap;
    }

    .summary .box{
        background:#fff;
        padding:8px 12px;
        border-radius:8px;
        border:2px solid #000;
        font-weight:700;
    }

    .modal-bg{
        position:fixed;
        inset:0;
        background:rgba(0,0,0,0.45);
        display:none;
        align-items:center;
        justify-content:center;
        z-index:999;
    }
    .modal{
        background:#fff;
        padding:18px;
        border-radius:12px;
        border:3px solid #000;
        width:320px;
    }

</style>
</head>
<body>

<div class="container">

    <!-- UPDATED BACK BUTTON -->
    <a href="myspace.html" class="back-btn">‚Üê Back to My Space</a>

    <div class="title">GRADE COMPUTATION</div>

    <div class="white-box">

        <!-- INPUT FORM -->
        <div class="form-row" id="inputForm">
            <div class="col">
                <label>Subject</label>
                <input type="text" id="subject">
            </div>

            <div class="col" style="max-width:120px;">
                <label>Units</label>
                <input type="number" id="units" min="1" step="1" value="3">
            </div>

            <div class="col" style="max-width:120px;">
                <label>Midterm</label>
                <input type="number" id="midterm" min="0" max="100">
            </div>

            <div class="col" style="max-width:120px;">
                <label>Final</label>
                <input type="number" id="finals" min="0" max="100">
            </div>

            <div class="col" style="max-width:220px;">
                <div class="controls">
                    <button class="btn" id="addBtn">ADD GRADE</button>
                    <button class="btn secondary" id="clearBtn">CLEAR</button>
                </div>
            </div>
        </div>

        <!-- TABLE -->
        <table>
            <thead>
                <tr>
                    <th>Subject</th>
                    <th>Units</th>
                    <th>Midterm</th>
                    <th>Final</th>
                    <th>Average</th>
                    <th>Grade Point</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="gradeTable"></tbody>
        </table>

        <div class="summary">
            <div class="box">Total Units: <span id="totalUnits">0</span></div>
            <div class="box">Overall GPA: <span id="overallGPA">0.00</span></div>
        </div>

    </div>
</div>

<script>
let grades = JSON.parse(localStorage.getItem('gradeData') || '[]');
let editIndex = -1;

function computeGP(avg){
    if(avg>=95) return 4.0;
    if(avg>=89) return 3.5;
    if(avg>=83) return 3.0;
    if(avg>=77) return 2.5;
    if(avg>=71) return 2.0;
    if(avg>=65) return 1.5;
    if(avg>=60) return 1.0;
    return 0.0;
}

function render(){
    const tbody = document.getElementById('gradeTable');
    tbody.innerHTML = "";
    let totalUnits = 0;
    let weighted = 0;

    grades.forEach((g,i)=>{
        let avg = (Number(g.midterm)+Number(g.finals))/2;
        let gp = computeGP(avg);

        totalUnits += Number(g.units);
        weighted += gp * Number(g.units);

        const tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${g.subject}</td>
            <td>${g.units}</td>
            <td>${g.midterm}</td>
            <td>${g.finals}</td>
            <td>${avg.toFixed(2)}</td>
            <td>${gp.toFixed(2)}</td>
            <td>
                <button class="edit-btn" onclick="editRow(${i})">Edit</button>
                <button class="delete-btn" onclick="deleteRow(${i})">Delete</button>
            </td>
        `;
        tbody.appendChild(tr);
    });

    document.getElementById('totalUnits').textContent = totalUnits;
    document.getElementById('overallGPA').textContent = totalUnits>0 ? (weighted/totalUnits).toFixed(2) : "0.00";
}

function deleteRow(i){
    grades.splice(i,1);
    save();
    render();
}

function editRow(i){
    let g = grades[i];
    editIndex = i;
    document.getElementById("subject").value = g.subject;
    document.getElementById("units").value = g.units;
    document.getElementById("midterm").value = g.midterm;
    document.getElementById("finals").value = g.finals;
    document.getElementById("addBtn").textContent = "SAVE CHANGES";
}

document.getElementById("addBtn").onclick = function(){
    let subject = document.getElementById("subject").value.trim();
    let units = Number(document.getElementById("units").value);
    let mid = Number(document.getElementById("midterm").value);
    let fin = Number(document.getElementById("finals").value);

    if(!subject || !units){
        alert("Please fill all fields");
        return;
    }

    let obj = {subject,units,midterm:mid,finals:fin};

    if(editIndex === -1){
        grades.push(obj);
    } else {
        grades[editIndex] = obj;
        editIndex = -1;
        document.getElementById("addBtn").textContent = "ADD GRADE";
    }

    save();
    clearForm();
    render();
};

function clearForm(){
    document.getElementById("subject").value="";
    document.getElementById("units").value=3;
    document.getElementById("midterm").value="";
    document.getElementById("finals").value="";
}

document.getElementById("clearBtn").onclick = clearForm;

function save(){
    localStorage.setItem("gradeData",JSON.stringify(grades));
}

render();
</script>

</body>
</html>









